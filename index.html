<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crystal Math</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { width:100%; height:100%; overflow:hidden; background:#000; font-family:sans-serif; }
    #canvas-container { position:absolute; top:0; left:0; width:100%; height:100%; }
    .content { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
      z-index:1; text-align:center; max-width:90%; background:rgba(0,0,0,0.4);
      padding:1.6rem 1.9rem; border-radius:.5rem; border:1px solid rgba(255,255,255,0.05);
    }
    .title { margin:1.5rem 0; font-size:2rem; letter-spacing:1.5rem;
      background:linear-gradient(90deg,hsl(200,100%,50%),hsl(280,100%,50%),hsl(220,100%,45%));
      -webkit-background-clip:text; color:transparent;
    }
    .intro, .intro2 { margin:0.15rem 0; white-space:pre-line; font-size:.72rem;
      letter-spacing:.05em; font-weight:300; line-height:1.55;
    }
    .intro { color:#ba5cbf; }
    .intro2 { color:#5a9ba4; }
    .main-info { margin-top:1.6rem; text-align:center; color:#d7e8ff; font-size:.98rem; }
    .info-block { background:rgba(5,15,35,0.55); border:1px solid rgba(120,200,255,0.15);
      border-radius:.75rem; padding:1.8rem 2rem; box-shadow:0 0 25px rgba(60,0,120,0.25);
    }
    .info-title { color:#7dd1ff; font-size:1.08rem; letter-spacing:.1em; text-transform:uppercase;
      margin-bottom:1.1rem; text-align:center;
    }
    .info-list { list-style:none; display:grid; gap:1.05rem; font-size:1rem; }
    .info-list li { position:relative; padding-left:0; line-height:1.7; text-align:center; }
    .info-list li::before { content:"‚ú¶"; display:inline-block; margin-right:.55rem; color:#92e5ff;
      text-shadow:0 0 8px rgba(90,190,255,0.9);
    }
    .price-line { color:#cfc7ff; font-size:1rem; }
    .price-line strong { color:#88f5ff; }
    .price-value { color:#fff; font-weight:600; text-shadow:0 0 10px rgba(120,210,255,0.7); display:inline-block; }
    .price-value.flash-up { animation:priceFlashUp 0.75s ease-out; }
    .price-value.flash-down { animation:priceFlashDown 0.75s ease-out; }
    .price-value.flash-flat { animation:priceFlashFlat 0.75s ease-out; }
    @keyframes priceFlashUp {
      0% { color:#1df59a; text-shadow:0 0 18px rgba(29,245,154,0.85); }
      100% { color:#fff; text-shadow:0 0 10px rgba(120,210,255,0.7); }
    }
    @keyframes priceFlashDown {
      0% { color:#ff5f6d; text-shadow:0 0 18px rgba(255,95,109,0.85); }
      100% { color:#fff; text-shadow:0 0 10px rgba(120,210,255,0.7); }
    }
    @keyframes priceFlashFlat {
      0% { color:#4fa3ff; text-shadow:0 0 18px rgba(79,163,255,0.85); }
      100% { color:#fff; text-shadow:0 0 10px rgba(120,210,255,0.7); }
    }
    .footers { margin-top:2rem; display:flex; flex-direction:column; align-items:center; gap:.75rem; }
    .footer-address { color:rgba(0,255,255,0.75); display:inline-flex; align-items:center; font-size:.85rem; }
    #copyBtn { margin-left:.5rem; background:none; border:none; font-size:1.2rem; color:inherit; cursor:pointer; }
    .footer-note { color:grey; margin-top:.2rem; font-size:.72rem; text-align:center; line-height:1.5; }
    @media(max-width:768px){.title{font-size:1.6rem;letter-spacing:1rem;}}@media(max-width:480px){.title{font-size:1.4rem;letter-spacing:.5rem;}}
  </style>
</head>
<body>
  <div id="canvas-container"></div>
  <div class="content">
    <h1 class="title">CRYSTAL <span class="break">MATH</span></h1>
    <p class="intro">·¥° ú…™·¥õ·¥á  ú·¥Ä·¥õ  ú·¥Ä·¥Ñ·¥ã·¥á Äs ·¥Ñ ü·¥è·¥Ä·¥ã·¥á·¥Ö …™…¥ s ú·¥Ä·¥Ö·¥è·¥°s  ú·¥Ä·¥†·¥á  ü·¥è…¥…¢ ·¥Ñ·¥è-·¥è·¥ò·¥õ·¥á·¥Ö ·¥õ ú·¥á ·¥Ñ·¥è·¥Ö·¥ás ·¥è“ì ·¥ò·¥è·¥°·¥á Ä.
·¥õ…™·¥ç·¥á ·¥Ä…¥·¥Ö ·¥Ä…¢·¥Ä…™…¥, ·¥õ ú·¥á è‚Äô·¥†·¥á ·¥áx·¥ò·¥ès·¥á·¥Ö ·¥Ñ Ä·¥Ä·¥Ñ·¥ãs …™…¥ ·¥õ ú·¥á ·¥Ñ·¥á…¥·¥õ Ä·¥Ä ü…™·¥¢·¥á·¥Ö “ì·¥è Ä·¥õ Ä·¥áss, ·¥Ö…™s·¥ç·¥Ä…¥·¥õ ü…™…¥…¢ …™·¥õ  ô Ä…™·¥Ñ·¥ã  ô è  ô Ä…™·¥Ñ·¥ã.
·¥õ ú Ä·¥è·¥ú…¢ ú ·¥èÃ®·¥ú…™·¥á·¥õ s·¥Ä ô·¥è·¥õ·¥Ä…¢·¥á ·¥Ä…¥·¥Ö ·¥Ñ Ä è·¥ò·¥õ…™·¥Ñ …™…¥…¥·¥è·¥†·¥Ä·¥õ…™·¥è…¥ ·¥õ ú·¥á è …¥·¥è·¥° ·¥õ ú Ä·¥á·¥Ä·¥õ·¥á…¥ ·¥õ ú·¥á ·¥†·¥á Ä è “ì·¥è·¥ú…¥·¥Ö·¥Ä·¥õ…™·¥è…¥ ·¥è“ì ·¥õ Ä·¥Ä·¥Ö-“ì…™,
·¥Ñ ü·¥á·¥Ä Ä…™…¥…¢ ·¥õ ú·¥á ·¥°·¥Ä è “ì·¥è Ä ·¥õ ú·¥á  Ä…™s·¥á ·¥è“ì ·¥õ ú·¥á ·¥Ö·¥á·¥Ñ·¥á…¥·¥õ Ä·¥Ä ü…™·¥¢·¥á·¥Ö  Ä·¥á·¥Ä ü·¥ç.</p>
    <div class="main-info">
      <div class="info-block">
        <div class="info-title">Core Realm Briefing</div>
        <ul class="info-list">
          <li>Hardcore mode with monthly free respawns</li>
          <li>X-ray proof controlled supply of crystals with real-world value</li>
          <li>Use <strong>2 crystals</strong> in the new beacon recipe to claim <strong>64√ó64</strong> of land.</li>
          <li>Redeem crystals at any activated beacon (beam active) to cash out for crypto.</li>
          <li class="price-line">Current crystal price: <span id="crystal-price" class="price-value">$0.0210</span> (<strong>9√ó</strong> the live pDAI price: <span id="pdai-price" class="price-value">$0.0020</span>)</li>
          <li>pDAI is a speculative future stablecoin rumoured to peg to 1$ <span id="pdai-potential" style="display:block; margin-top:.35rem;">(potential 500.00x from here)</span></li>
          <li>Free to play! Any crystals found will carry over to the official launch (map TBA).</li>
          <li>Please report any exploits/bugs found. ^-^/</li>
        </ul>
      </div>
    </div>
    <p class="intro2" style="margin:1.2rem 0 .6rem; font-size:1rem;">
      <a id="deeper-link" href="#" style="color:inherit; text-decoration:underline dotted;">·¥è…¥ ü è ·¥è…¥·¥á ·¥°…™ ü ü…™…¥…¢ ·¥õ·¥è ·¥á·¥ç ô Ä·¥Ä·¥Ñ·¥á ·¥ú…¥·¥Ñ·¥á Ä·¥õ·¥Ä…™…¥·¥õ è ·¥ç·¥Ä è ·¥ú…¥·¥Ñ·¥è·¥†·¥á Ä ·¥õ ú·¥á ·¥Ö·¥á·¥á·¥ò·¥á Ä  ü·¥Ä è·¥á Äs ·¥è“ì ·¥õ ú·¥á ·¥°·¥è Ä·¥ã</a>
    </p>
    <div class="footers">
      <div class="footer-address">0x6b175474e89094c44da98b954eedeac495271d0f<button id="copyBtn">‚éò</button></div>
      <div class="footer-note">
        <div style="height:1rem;"></div>
        <div style="color:#555555; font-size:.8rem; margin-top:0.5rem;">
          ùëµ √ò ‚≤¶ ”á ·ìø ‚Ç¶ ‚Ç≤&nbsp;&nbsp;¬°Ôπ© $ Œî ‚Ç° ¬Æ Œ£ ƒê
        </div>
      </div>
    </div>
    <p style="margin-bottom:1rem; font-size:.65rem;">
      <a href="https://app.milanote.com/1U4b8B1lGSa43t/minecraft-economy-flowchart" target="_blank" rel="noopener noreferrer">
        https://app.milanote.com/1U4b8B1lGSa43t/minecraft-economy-flowchart
      </a>
    </p>
  </div>

    <div id="image-modal" style="position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.88); z-index:5; opacity:0; pointer-events:none; transition:opacity 0.25s ease;">
      <button id="close-modal" style="position:absolute; top:2rem; right:2rem; background:none; border:none; color:#e6f7ff; font-size:2rem; cursor:pointer;">√ó</button>
      <img src="unit.jpg" alt="PulseChain crew" style="max-width:90%; max-height:90%; border-radius:.75rem; box-shadow:0 0 35px rgba(0,0,0,0.65); border:1px solid rgba(255,255,255,0.12);">
    </div>

  <script src="https://pixijs.download/v6.5.8/pixi.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pixi-filters@4.2.0/dist/pixi-filters.js"></script>
  <script>
    const app = new PIXI.Application({ autoDensity:true, antialias:true,
      backgroundAlpha:0, width:window.innerWidth, height:window.innerHeight,
      resolution:window.devicePixelRatio||1
    });
    document.getElementById('canvas-container').appendChild(app.view);
    app.ticker.maxFPS = 120;
    const CELL=150; let cols=0, rows=0; const grid=[], nodes=[];
    const tmpG=new PIXI.Graphics(); tmpG.beginFill(0xffffff); tmpG.drawCircle(0,0,1.5); tmpG.endFill();
    const nodeTex=app.renderer.generateTexture(tmpG);
    const COLORS=[0xaa00ff,0x00aaff,0x004de6];
    const lines=new PIXI.Graphics(); lines.blendMode=PIXI.BLEND_MODES.ADD; app.stage.addChild(lines);
    let mouse=null;
    window.addEventListener('mousemove', e=>mouse={x:e.clientX,y:e.clientY});
    window.addEventListener('mouseleave', ()=>mouse=null);
    function init(){cols=Math.ceil(app.screen.width/CELL);
      rows=Math.ceil(app.screen.height/CELL);
      grid.length=cols*rows;
      for(let i=0;i<grid.length;i++)grid[i]=[];
      nodes.length=0;
      app.stage.removeChildren().forEach(c=>{});
      app.stage.addChild(lines);
      const count=Math.floor((app.screen.width*app.screen.height)/15000*1.56);
      for(let i=0;i<count;i++){const n=new PIXI.Sprite(nodeTex);
        n.tint=COLORS[i%COLORS.length]; n.anchor.set(0.5);
        n.x=Math.random()*app.screen.width; n.y=Math.random()*app.screen.height;
        n.vx=(Math.random()-0.5)*0.51; n.vy=(Math.random()-0.5)*0.51;
        n.ix=n.iy=0; app.stage.addChild(n); nodes.push(n);
      }}
    app.ticker.add(()=>{
      lines.clear(); for(let i=0;i<grid.length;i++)grid[i].length=0;
      const sw=app.screen.width;
      for(const n of nodes){
        const idx=Math.floor(n.y/CELL)*cols+Math.floor(n.x/CELL);
        if(grid[idx])grid[idx].push(n);
      }
      for(const a of nodes){
        const col=Math.floor(a.x/CELL), row=Math.floor(a.y/CELL);
        for(let dy=-1;dy<=1;dy++)for(let dx=-1;dx<=1;dx++){
          const c=col+dx,r=row+dy;
          if(c<0||c>=cols||r<0||r>=rows)continue;
          for(const b of grid[r*cols+c]){
            if(a===b)continue;
            const dx_=a.x-b.x,dy_=a.y-b.y,dist=Math.hypot(dx_,dy_);
            if(dist<CELL){lines.lineStyle(1.2,a.tint,((CELL-dist)/CELL)*0.4);
              lines.moveTo(a.x,a.y).lineTo(b.x,b.y);}}
        }}
      for(const n of nodes){
        n.x+=n.vx+n.ix; n.y+=n.vy+n.iy; n.ix*=0.6; n.iy*=0.6;
        if(mouse){const dx_=n.x-mouse.x,dy_=n.y-mouse.y,dist=Math.hypot(dx_,dy_);
          if(dist<CELL){const f=(CELL-dist)/CELL;n.ix+=(dx_/dist)*5*f; n.iy+=(dy_/dist)*5*f;}}
        if(n.x<0||n.x>sw)n.vx*=-1;
        if(n.y<0||n.y>app.screen.height)n.vy*=-1;
      }
      app.renderer.render(app.stage);
    });
    window.addEventListener('resize',()=>{app.renderer.resize(window.innerWidth,window.innerHeight);init();}); init();
    const priceEl=document.getElementById('pdai-price');
    const crystalPriceEl=document.getElementById('crystal-price');
    const potentialEl=document.getElementById('pdai-potential');
    const formatUsd=val=>`$${Number(val).toLocaleString(undefined,{minimumFractionDigits:4,maximumFractionDigits:4})}`;
    const formatPotential=val=>`(potential ${Number(val).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}x from here)`;
    const FALLBACK_PDAI=0.0020;
    const FALLBACK_CRYSTAL=0.0210;
    const FALLBACK_POTENTIAL_VALUE=1/FALLBACK_PDAI;
    let lastPdaiPrice=null;
    let lastCrystalPrice=null;
    const applyFlash=(el,type)=>{
      if(!el) return;
      el.classList.remove('flash-up','flash-down','flash-flat');
      void el.offsetWidth;
      const cls=type==='up'?'flash-up':type==='down'?'flash-down':'flash-flat';
      el.classList.add(cls);
    };
    function renderPrices(pdaiPrice){
      const validPrice=Number.isFinite(pdaiPrice)&&pdaiPrice>0?pdaiPrice:null;
      const pdaiValue=validPrice!==null?validPrice:FALLBACK_PDAI;
      const crystalValue=validPrice!==null?validPrice*9:FALLBACK_CRYSTAL;
      const potentialValue=validPrice!==null?(1/validPrice):FALLBACK_POTENTIAL_VALUE;

      const pdaiChange=lastPdaiPrice===null?'flat':pdaiValue>lastPdaiPrice?'up':pdaiValue<lastPdaiPrice?'down':'flat';
      const crystalChange=lastCrystalPrice===null?'flat':crystalValue>lastCrystalPrice?'up':crystalValue<lastCrystalPrice?'down':'flat';

      priceEl.textContent=formatUsd(pdaiValue);
      crystalPriceEl.textContent=formatUsd(crystalValue);
      potentialEl.textContent=formatPotential(potentialValue);

      applyFlash(priceEl,pdaiChange);
      applyFlash(crystalPriceEl,crystalChange);

      lastPdaiPrice=pdaiValue;
      lastCrystalPrice=crystalValue;
    }

    async function updatePrices(){
      try{
        const res=await fetch('https://api.dexscreener.com/latest/dex/pairs/pulsechain/0xfc64556faa683e6087f425819c7ca3c558e13ac1');
        const data=await res.json();
        const price=parseFloat(data?.pairs?.[0]?.priceUsd);
        if(!Number.isFinite(price)||price<=0) throw new Error('Invalid price data');
        renderPrices(price);
      }catch(err){
        console.error('Price fetch failed',err);
        renderPrices(null);
      }
    }
    renderPrices(null);
    updatePrices();
    setInterval(updatePrices,1000);
    document.getElementById('copyBtn').addEventListener('click',()=>navigator.clipboard.writeText('0xA41B5174C803B2F779f4C83d482478b94A240fE6'));

    const modal=document.getElementById('image-modal');
    const openModal=document.getElementById('deeper-link');
    const closeModal=document.getElementById('close-modal');

    const showModal=()=>{
      modal.style.opacity='1';
      modal.style.pointerEvents='auto';
    };
    const hideModal=()=>{
      modal.style.opacity='0';
      modal.style.pointerEvents='none';
    };

    openModal.addEventListener('click',e=>{
      e.preventDefault();
      showModal();
    });
    closeModal.addEventListener('click',hideModal);
    modal.addEventListener('click',e=>{ if(e.target===modal) hideModal(); });
  </script>
</body>
</html>
